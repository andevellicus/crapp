<!DOCTYPE html>
<html lang="en">
{{ template "head" . }}
<body>
    <div class="container">
        {{ template "header" .}}
        
        <div id="message" class="message"></div>
        
        <div class="auth-container">
            <h3>Set New Password</h3>
            
            <div id="loading" style="text-align: center; display: block;">
                <p>Validating your reset link...</p>
            </div>
            
            <div id="reset-form-container" style="display: none;">
                <form id="reset-password-form" class="auth-form">
                    <input type="hidden" id="token" name="token">
                    
                    <div class="form-group">
                        <label for="new-password">New Password</label>
                        <input type="password" id="new-password" name="new_password" required 
                               minlength="8" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}">
                        <div class="password-requirements">
                            Passwords must be at least 8 characters long and include uppercase letters, 
                            lowercase letters, and numbers.
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="confirm-password">Confirm New Password</label>
                        <input type="password" id="confirm-password" name="confirm_password" required>
                    </div>
                    
                    <button type="submit" class="submit-button">Reset Password</button>
                </form>
            </div>
            
            <div id="invalid-token" style="text-align: center; display: none;">
                <p>Your password reset link is invalid or has expired.</p>
                <p>Please request a new password reset link.</p>
                <a href="/forgot-password" class="button" style="display: inline-block; margin-top: 20px;">Request New Link</a>
            </div>
        </div>
        
        <footer>
            <p>Â© 2025 CRAPP - Daily Symptom Reporting</p>
        </footer>
    </div>
    
    <script src="/static/js/reset-password.js"></script>
</body>
</html>